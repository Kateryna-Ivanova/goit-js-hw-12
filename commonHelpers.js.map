{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n// --------------------------------------------------------елементи\nconst form = document.querySelector(\".js-search-form\");\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".js-gallery\");\nconst btnMore = document.querySelector(\".js-loadmore\");\nconst target = document.querySelector('.js-backdrop');\n\nlet page = 1;\nlet query = \"\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n// ----------------------------------------------------слухачі подій\nform.addEventListener(\"submit\", onSubmit);\n\nbtnMore.addEventListener(\"click\", loadMoreData);\n//---------------------------------------------------ф-я при натисканні Search\nasync function onSubmit(event) {\n  event.preventDefault();\n  gallery.innerHTML = \"\";\n  btnMore.classList.add(\"is-hidden\");\n\n  page = 1;\n  // Витягуємо пошуковий запит із введеної форми.\n  query = event.target.elements[\"search\"].value.trim();\n  loaderPlay();\n\n  if (!query) {\n\n    loaderStop();\n    gallery.innerHTML = \"\";\n    btnMore.classList.add(\"is-hidden\");\n    return iziToast.info({\n      messageColor: 'rgb(255, 255, 255)',\n      backgroundColor: 'blue',\n      timeout: '5000',\n      message: \"Please fill out search field\",\n      position: 'topRight',\n    });\n  };\n  try {\n    //Oтримуємо масив зображень і загальну кількість зображень для запиту.\n    const { data: { hits, totalHits } } = await getPicture(query, page);\n    if (hits.length > 0) {\n      // Відтворюємо галерею із отриманими зображеннями.\n     gallery.innerHTML = renderGallery(hits);\n      lightbox.refresh();\n      btnMore.classList.remove(\"is-hidden\");\n\n    if (page * 40 >= totalHits) {\n      btnMore.classList.add(\"is-hidden\");\n      iziToast.info({\n      messageColor: 'rgb(66, 170, 255)',\n      backgroundColor: 'blue',\n      timeout: '3000',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n    }\n    } else {\n      btnMore.classList.add(\"is-hidden\");\n      iziToast.error({\n                        messageColor: \"rgb(255, 255, 255)\",\n                        backgroundColor: \"red\",\n                        timeout:\"5000\",\n                        message: \"Sorry, there are no images matching your search query. Please try again.\",\n                        position: 'topRight',\n                });\n   }\n  } catch (error) {\n    iziToast.error({   title: Error,\n                        messageColor: \"rgb(255, 255, 255)\",\n                        backgroundColor: \"red\",\n                        timeout:\"3000\",\n                        position: \"topRight\",\n                });\n  }\n  finally { loaderStop(); };\n  event.target.reset();\n};\n//--------------------------------------------------------- ф-я при натисканні кнопки Load More\nasync function loadMoreData() {\n  // Збільшуємо номер сторінки.\n  page += 1;\n  loaderPlay();\n  try {\n    // Намагаємось отримати більше фотографій зі збільшеним номером сторінки.\n    const { data: { hits, totalHits } } = await getPicture(query, page);\n      gallery.insertAdjacentHTML('beforeend', renderGallery(hits));\n      lightbox.refresh();\n      \n      btnMore.classList.remove(\"is-hidden\");\n// Якщо результатів більше немає, відображаємо повідомлення.\n    if (page * 40 >= totalHits) {\n        \n        btnMore.classList.add(\"is-hidden\");\n\n        iziToast.info({\n      messageColor: 'rgb(255, 255, 255)',\n      backgroundColor: 'red',\n      timeout: '6000',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n    };\n  } catch (error) {\n    iziToast.error({   title: Error,\n                        messageColor: \"rgb(255, 255, 255)\",\n                        backgroundColor: \"red\",\n                        timeout:\"3000\",\n                        position: \"topRight\",\n                });\n  }\n   finally { loaderStop() };\n};\n// -------------------------------------------------------------ф-я запиту\n function getPicture(query, page) {\n\n  const API_KEY = '41659492-ec5a278d39a7ff9431707ab98';\n  axios.defaults.baseURL = \"https://pixabay.com/api/\";\n  return axios.get(\"\", {\n    params: {\n      key: API_KEY,\n      q: query,\n      page,\n      per_page: 40,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n    },\n  });\n};\n// ---------------------------------------------------ф-я візуалізації галереї\n function renderGallery(arr) {\n  // ф-я отримує масив зображень і генерує HTML для кожного зображення.\n  // Згенерований HTML містить посилання на велике зображення ,інформацію про вподобання, перегляди, коментарі та завантаження.\n  return arr.map(( image) => {\n      const { webformatURL, largeImageURL, tags, likes, views, comments, downloads,  } = image;\n       return `\n        <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\"  >\n          </a>\n          <div class=\"gallery-item-info\">\n            <div class=\"info\">\n            <p><b>Likes</b></p>\n            <p>${likes}</p>\n            </div>\n            <div class=\"info\">\n            <p><b>Views</b></p>\n            <p>${views}</p>\n            </div>\n            <div class=\"info\">\n            <p><b>Comments</b></p>\n            <p>${comments}</p>\n            </div>\n            <div class=\"info\">\n            <p><b>Downloads</b></p>\n            <p>${downloads}</p>\n            </div>\n          </div>\n        </li>\n      `;\n    }).join(\"\");\n};\n// -------------------------------------------------------ф-ї  завантаження\nfunction loaderPlay() {\n  loader.classList.remove(\"hidden\");\n  target.classList.remove('is-hidden');\n};\n\nfunction loaderStop() {\n  loader.classList.add(\"hidden\");\n  target.classList.add('is-hidden');\n};\n\n\n"],"names":["form","loader","gallery","btnMore","target","page","query","lightbox","SimpleLightbox","onSubmit","loadMoreData","event","loaderPlay","loaderStop","iziToast","hits","totalHits","getPicture","renderGallery","API_KEY","axios","arr","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"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"}